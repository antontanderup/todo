var todo={tasks:[],taskLocalStorage:function(t){"backup"===t?localStorage.tasks=JSON.stringify(todo.tasks):"reinitialize"===t&&(todo.tasks=JSON.parse(localStorage.tasks),todo.listTasks("all",!1),todo.listTasks("all",!0))},initialise:function(){},listTask:function(t,o,e){var s=document.getElementById(e),d=document.createElement("li"),a=document.createTextNode(o);d.appendChild(a),d.setAttribute("id",t);var i=document.createElement("span"),n=document.createElement("button"),l=document.createElement("button"),k="";n.appendChild(document.createTextNode("X")),n.setAttribute("title","Delete task."),"todo-list"===e?(k=document.createTextNode("✓"),l.appendChild(k),l.setAttribute("title","Complete task.")):"history-list"===e&&(k=document.createTextNode("÷"),l.appendChild(k),l.setAttribute("title","Task not yet completed.")),i.appendChild(n),i.appendChild(l),d.appendChild(i),s.insertBefore(d,s.firstChild),n.addEventListener("click",function(){todo.deleteTask(t)},!1),"todo-list"===e?l.addEventListener("click",function(){todo.doneTask(t)},!1):"history-list"===e&&l.addEventListener("click",function(){todo.undoneTask(t)},!1)},listTasks:function(t,o,e){if("all"===t){if(o===!1)for(var s=0;s<todo.tasks.length;s++)todo.tasks[s].done===!1&&todo.listTask(todo.tasks[s].id,todo.tasks[s].task,"todo-list");else if(o===!0)for(var d=0;d<todo.tasks.length;d++)todo.tasks[d].done===!0&&todo.listTask(todo.tasks[d].id,todo.tasks[d].task,"history-list")}else if("one"===t)for(var a=0;a<todo.tasks.length;a++){var i=todo.tasks[a];i.id===e&&o===!1?todo.listTask(i.id,i.task,"todo-list"):i.id===e&&o===!0&&todo.listTask(i.id,i.task,"history-list")}},addTask:function(t){for(var o=0,e=0;e<todo.tasks.length;e++)o<todo.tasks[e].id?o=todo.tasks[e].id:todo.tasks[e].id||(o=0);o+=1,todo.tasks.push({task:t,done:!1,id:o}),todo.listTasks("one",!1,o),todo.taskLocalStorage("backup")},doneTask:function(t){for(var o=0;o<todo.tasks.length;o++)if(todo.tasks[o].id===t){todo.tasks[o].done=!0;var e=document.getElementById(todo.tasks[o].id);e.parentNode.removeChild(e),todo.listTasks("one",!0,todo.tasks[o].id)}todo.taskLocalStorage("backup")},undoneTask:function(t){for(var o=0;o<todo.tasks.length;o++)if(todo.tasks[o].id===t){todo.tasks[o].done=!1;var e=document.getElementById(todo.tasks[o].id);e.parentNode.removeChild(e),todo.listTasks("one",!1,todo.tasks[o].id)}todo.taskLocalStorage("backup")},deleteTask:function(t){for(var o=0;o<todo.tasks.length;o++)if(todo.tasks[o].id===t){var e=document.getElementById(todo.tasks[o].id);todo.tasks.splice(o,1),e.parentNode.removeChild(e)}todo.taskLocalStorage("backup")}},submitForm=document.getElementById("submit-form");submitForm.addEventListener("submit",function(t){t.preventDefault();var o=document.getElementById("task-input");return todo.addTask(o.value),o.value="",!1},!1);