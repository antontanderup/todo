var todo={tasks:[],taskLocalStorage:function(t){"backup"===t?localStorage.tasks=JSON.stringify(todo.tasks):"reinitialize"===t&&(todo.tasks=JSON.parse(localStorage.tasks),todo.listTasks("all",!1),todo.listTasks("all",!0))},initialise:function(){},listTask:function(t,o,e){var s=document.getElementById(e),a=document.createElement("li");a.setAttribute("id",t);var d=document.createElement("span"),i=document.createTextNode(o);d.appendChild(i),d.setAttribute("class","task-span");var n=document.createElement("span"),l=document.createElement("button"),k=document.createElement("button"),r="";n.setAttribute("class","button-span"),l.appendChild(document.createTextNode("X")),l.setAttribute("title","Delete task."),l.setAttribute("class","delete-button"),"todo-list"===e?(r=document.createTextNode("✓"),k.appendChild(r),k.setAttribute("title","Complete task."),k.setAttribute("class","do-button")):"history-list"===e&&(r=document.createTextNode("÷"),k.appendChild(r),k.setAttribute("title","Task not yet completed."),k.setAttribute("class","undo-button")),n.appendChild(l),n.appendChild(k),a.appendChild(d),a.appendChild(n),s.insertBefore(a,s.firstChild),l.addEventListener("click",function(){todo.deleteTask(t)},!1),"todo-list"===e?k.addEventListener("click",function(){todo.doneTask(t)},!1):"history-list"===e&&k.addEventListener("click",function(){todo.undoneTask(t)},!1)},listTasks:function(t,o,e){if("all"===t){if(o===!1)for(var s=0;s<todo.tasks.length;s++)todo.tasks[s].done===!1&&todo.listTask(todo.tasks[s].id,todo.tasks[s].task,"todo-list");else if(o===!0)for(var a=0;a<todo.tasks.length;a++)todo.tasks[a].done===!0&&todo.listTask(todo.tasks[a].id,todo.tasks[a].task,"history-list")}else if("one"===t)for(var d=0;d<todo.tasks.length;d++){var i=todo.tasks[d];i.id===e&&o===!1?todo.listTask(i.id,i.task,"todo-list"):i.id===e&&o===!0&&todo.listTask(i.id,i.task,"history-list")}},addTask:function(t){for(var o=0,e=0;e<todo.tasks.length;e++)o<todo.tasks[e].id?o=todo.tasks[e].id:todo.tasks[e].id||(o=0);o+=1,todo.tasks.push({task:t,done:!1,id:o}),todo.listTasks("one",!1,o),todo.taskLocalStorage("backup")},doneTask:function(t){for(var o=0;o<todo.tasks.length;o++)if(todo.tasks[o].id===t){todo.tasks[o].done=!0;var e=document.getElementById(todo.tasks[o].id);e.parentNode.removeChild(e),todo.listTasks("one",!0,todo.tasks[o].id)}todo.taskLocalStorage("backup")},undoneTask:function(t){for(var o=0;o<todo.tasks.length;o++)if(todo.tasks[o].id===t){todo.tasks[o].done=!1;var e=document.getElementById(todo.tasks[o].id);e.parentNode.removeChild(e),todo.listTasks("one",!1,todo.tasks[o].id)}todo.taskLocalStorage("backup")},deleteTask:function(t){for(var o=0;o<todo.tasks.length;o++)if(todo.tasks[o].id===t){var e=document.getElementById(todo.tasks[o].id);todo.tasks.splice(o,1),e.parentNode.removeChild(e)}todo.taskLocalStorage("backup")}},submitForm=document.getElementById("submit-form");submitForm.addEventListener("submit",function(t){t.preventDefault();var o=document.getElementById("task-input");return todo.addTask(o.value),o.value="",!1},!1);